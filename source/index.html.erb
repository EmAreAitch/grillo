<% content_for :title, data.home.title %>

<%# ---------- Variables ---------- %>
<% home = data.home %>
<% menu_items = data.menu.catalogue %>
<% gallery_images = home.gallery.images %>
<% testimonials = home.testimonials %>
<% reservation = home.reservation %>
<% welcome = home.welcome %>
<% hero = home.hero %>
<% about = home.about %>

<!-- Hero / Banner -->
<section id="hero">
  <div class="hero-content">
    <h1><%= hero.headline %></h1>
    <p><%= hero.subheadline %></p>
    <a href="<%= hero.cta_link %>" class="cta"><%= hero.cta_text %></a>
  </div>
</section>

<!-- Welcome Section -->
<section id="welcome">
  <h2><%= welcome.title %></h2>  
  <div class="welcome-images">    
    <img src="<%= welcome.image %>" alt="Welcome Image">
  </div>
  <p><%= welcome.text %></p>
</section>

<hr>

<!-- Menu Section -->
<section id="menu">
  <h2>MENU</h2>
  <div class="menu-scroll-wrapper">
    <button class="scroll-btn left" aria-label="Scroll left">&#9664;</button>
  
    <div class="menu-categories" id="categoryScroll">
      <% menu_items.map(&:category).uniq.each_with_index do |it, index| %>
        <%= content_tag(:span, it.humanize, class: (index == 0 ? "active" : ""), "data-category": it) %>
      <% end %>
    </div>
  
    <button class="scroll-btn right" aria-label="Scroll right">&#9654;</button>
  </div>
  

  <div class="menu-items">
    <% menu_items.first.items.each_with_index do |item, index| %>
      <div class="menu-item">
        <img src="/images/<%= index + 1 %>.avif" alt="<%= item.name %>">
        <div class="info">
          <h3><%= item.name %></h3>
          <p><%= item.description %></p>
        </div>
        <span class="price">Â£<%= item.price %></span>
      </div>
    <% end %>
  </div>
</section>

<hr>

<!-- Gallery Section -->
<section id="gallery">
  <h2>GALLERY</h2>
  <div class="gallery-grid">
    <% gallery_images.each_with_index do |image, i| %>
      <img src="<%= image %>" alt="Gallery Image <%= i + 1 %>">
    <% end %>
  </div>
</section>

<hr>

<!-- About Us Section -->
<section id="about">
  <h2><%= about.title %></h2>
  <div class="about-content">
    <div class="about-text">
      <% about.paragraphs.each do |para| %>
        <p><%= para %></p>
      <% end %>
    </div>
    <div class="about-image">
      <img src="<%= about.image %>" alt="Our Team at Grill-o">
    </div>
  </div>
</section>

<hr>

<!-- Testimonials Section -->
<section id="testimonials">
  <h2>TESTIMONIALS</h2>
  <% testimonials.each do |testimonial| %>
    <div class="testimonial-box">
      <div class="stars">
        <% rand(3..5).times do %>
          <svg class="star" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#16796A" width="20" height="20">
            <path d="M12 17.27L18.18 21l-1.63-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.45 4.73L5.82 21z"/>
          </svg>
        <% end %>
      </div>
      <a><%= testimonial.name %></a>
      <p><%= testimonial.message %></p>
    </div>
  <% end %>
</section>

<!-- Reservation Section -->
<section id="reservation">
  <div class="reservation-container">
    <div class="reservation-form">
      <h2><%= reservation.heading %></h2>
      <p><%= reservation.description %></p>
      <form name="reservation" netlify method="POST">      
        <input type="text" name="name" placeholder="Your name" required />
        <input type="email" name="email" placeholder="Email" required />
        <input type="text" name="phone" placeholder="Phone Number" required />
      
        <select name="people" required>
          <% reservation.people_options.each do |opt| %>
            <option><%= opt %></option>
          <% end %>
        </select>
      
        <select name="time" required>
          <% reservation.time_slots.each do |slot| %>
            <option><%= slot %></option>
          <% end %>
        </select>
      
        <input type="date" name="date" id="reservation-date" required />
        <textarea name="requests" placeholder="Add a special request (optional)"></textarea>
      
        <button type="submit">Reserve A Table</button>
      </form>
      
    </div>
    <div class="reservation-info" id="contact">
      <h3>-Open Hour-</h3>
      <p>Weekdays <span><%= reservation.open_hours.weekdays %></span></p>
      <p>Saturday <span><%= reservation.open_hours.saturday %></span></p>
      <p>Sunday <span><%= reservation.open_hours.sunday %></span></p>
      <h3>-Contact us-</h3>
      <p><%= reservation.contact.phone %></p>
      <p><%= reservation.contact.email %></p>
      <h3>-Visit Us-</h3>
      <div class="map-container">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1983.942510879119!2d-0.1262363841782428!3d51.51104077963561!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x487604c9226b9281%3A0x9a6280a962d6b40e!2sCovent%20Garden%2C%20London%20WC2E%209DD%2C%20UK!5e0!3m2!1sen!2suk!4v1691741357762!5m2!1sen!2suk"
          width="100%"          
          style="border:0; border-radius: 8px;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </div>
  </div>
</section>
